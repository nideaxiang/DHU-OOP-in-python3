# 第十讲 模块和客户端

## 1 模块化程序设计

- 多个可以复用的类和函数分组在模块中，提供计算功能的称作函数模块
- 导入并使用这些模块的程序叫客户端程序
- 模块化编程：将计算任务分解成不同的模块的程序设计方法
- API:应用程序编程接口，用于描述模块中提供函数的功能和调用方法，在客户端直接使用模块，无需了解细节

查看python模块的API

~~~python
import 模块
help(模块)
~~~

## 2 模块化设计和实现

### 2.1 原则

- 先设计API再实现模块

  **API的设计： 可用函数的签名的精准规范** 

  ​		       **描述函数作用的非正式自然语言描述**

- 控制模块大小，只提供最底层的函数

- 在模块中测试代码，并消除全局代码

- 部分不被外部调用的函数使用私有函数实现

- 通过文档提供模块帮助信息

### 2.2 模块的测试代码

### 每个模块都有一个名称，可以通过\__name__获得，特别地，当模块单独运行时，其\__name__值为‘\__main\__’

### 2.3 文档字符串

文档字符串：首行大写字母开始，句号结尾。第二行是空行。第三行是项目描述。

查看文档字符串的方法：

- 使用内置函数 help()
- 使用函数的特殊属性函数名 .\__doc__

### 2.4 按字节编译的.pyc文件：更快地启动



## 3. 模块的导入和调用

### 3.1 导入和使用模块

~~~python
import 模块
from 模块 import 成员
from 模块 import *

#重新加载模块 reload（）
from importlib import reload # 用于重新加载之前导入过的模块
~~~

### 3.2 动态导入模块：\__import__



## 4. 包：相似模块组织成包

#### 模块 ——.py文件

#### 包—— 文件夹 ：通常文件夹中只要有一个特殊文件 \__init__.py python就会将该文件夹作为包， \__init__.py 可以为空

### 4.1 包的导入和使用

~~~python
import 包名.模块名

#使用
包名.模块名.函数名
~~~

注意： 

- **当直接导入包时`import 包名` 将不会导入目录下的模块和子包，只会执行init.py文件**
- **使用`from 包名 import *` 将会导入init.py中指定的模块或子包，而不会自动导入所有模块**



## 5 模块的导入顺序

**搜索顺序：**

- **当前python位于的目录**
- **操作系统环境变量PATH中的目录**
- **标准库目录**



**包查找顺序：**

- **包**
- **扩展模块**
- **优化模块**
- **编译模块**
- **python模块**



## 6 dir()函数：列举当前模块中所有的成员



## 7.名称空间：每一个名称都有一个作用范围，在作用范围内，可以直接引用该名称，作用范围外则不行

### 7.1 名称查找顺序： 在代码中使用名称x时，python解释器按：局部-全局-内置 的顺序进行查找

- **局部：当前函数或类中定义的局部变量**
- **全局：当前模块中定义的变量**
- **内置：（最后尝试）**

### 7.2 顶层模块：启动代码文件

python程序是由多个模块组成的，其中一个模块作为应用程序的启动代码，这个模块称为顶层模块，其余的模块均是 库 



## 8 模块搜索路径

~~~python
import sys
sys.path

### 临时增加模块搜索路径
import sys
sys.path.append('C:/')

~~~

